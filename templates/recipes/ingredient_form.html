{% extends "base.html" %}
{% load static %}

{# SEO: descripción y JSON-LD para la página de ingredientes #}
{% block head_extra %}
  <meta name="description"
        content="{% trans 'Introduce tus ingredientes sobrantes y obtén recetas IA mientras disfrutas de un fondo de hojas simbolizando sostenibilidad.' %}">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "{% trans 'Mis Ingredientes' %}",
    "description": "{% trans 'Ingresa los ingredientes que tengas y recibe recetas creativas generadas por IA con un fondo animado de hojas sostenible.' %}"
  }
  </script>
{% endblock %}

{% block title %}Mis ingredientes{% endblock %}

{% block content %}
<main class="mx-auto py-8 px-4 sm:px-6 lg:px-8">
  <header>
    <h1 class="text-xl sm:text-2xl font-bold mb-6">{% trans "Mis ingredientes" %}</h1>
  </header>

  <section aria-labelledby="ingredients-form">
    <h2 id="ingredients-form" class="sr-only">{% trans "Formulario de ingredientes" %}</h2>
    <form hx-post="{% url 'recipes:suggest' %}"
          hx-target="#result"
          hx-swap="innerHTML"
          class="space-y-4">

      {% csrf_token %}
      <div>
        <label for="ingredients" class="block text-sm font-medium text-gray-700 mb-1">{% trans "Ingredientes" %}</label>
        <textarea id="ingredients"
                  name="ingredients"
                  rows="5"
                  placeholder="zanahoria, garbanzos, arroz hervido…"
                  class="w-full p-3 border rounded resize-none focus:outline-none focus:ring-2 focus:ring-primary"
                  required></textarea>
      </div>

      <button type="submit"
              class="w-full sm:w-auto block px-4 py-2 bg-primary text-white font-medium rounded text-center hover:bg-primary-dark transition">
        {% trans "Sugerir receta" %}
      </button>
    </form>
  </section>

  <section id="result" aria-live="polite" class="mt-6"></section>

  <aside class="mt-12">
    <h2 class="text-lg sm:text-xl font-semibold mb-4">{% trans "Próximamente" %}</h2>
    <p class="text-gray-700 text-sm md:text-base mb-2">
      {% trans "Muy pronto activaremos un sistema de recompensas: según las insignias que obtengas y el CO₂ que evites al aprovechar tus ingredientes sobrantes," %}
      <strong>{% trans "recibirás descuentos exclusivos en nuestra tienda asociada EcoMarket" %}</strong>.
    </p>
    <p class="text-gray-700 text-sm md:text-base">
      {% trans "Cuanto más CO₂ ahorres y más insignias acumules, mayores serán tus descuentos en productos sostenibles." %}
    </p>
  </aside>
</main>
{% endblock %}
