{% extends "base.html" %}
{% load static i18n %}

{% block title %}
  {% trans "Mis Insignias" %}
{% endblock %}

{% block content %}
<section class="container mx-auto p-6"><!--
  container: centra y ancho máximo.
  mx-auto: márgenes auto horizontales.
  p-6: padding 1.5rem.
-->
  <h1 class="text-2xl font-serif text-primary mb-4">{% trans "Insignias" %}</h1>

  <!-- Insignias ganadas -->
  <div class="mb-12">
    <h2 class="text-xl font-semibold mb-4">{% trans "Tus Insignias" %}</h2>
    {% if owned_badges %}
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">
        {% for badge in owned_badges %}
          <div class="bg-green-50 p-6 rounded-lg shadow-lg flex flex-col items-center">
            <!-- Contenedor circular -->
            <div class="w-28 h-28 mb-4 rounded-full overflow-hidden border-4 border-green-500 shadow-md flex items-center justify-center">
              {% if badge.name == "Starter" %}
                <img src="{% static 'img/badges/starter.png' %}" alt="{{ badge.name }}" class="max-w-full max-h-full">
              {% elif badge.name == "Partner" %}
                <img src="{% static 'img/badges/Partner.png' %}" alt="{{ badge.name }}" class="max-w-full max-h-full">
              {% elif badge.name == "Co2-Helper" %}
                <img src="{% static 'img/badges/CO2Helper.png' %}" alt="{{ badge.name }}" class="max-w-full max-h-full">
              {% elif badge.name == "Eco-Veteran" %}
                <img src="{% static 'img/badges/EcoVeteran.png' %}" alt="{{ badge.name }}" class="max-w-full max-h-full">
              {% endif %}
            </div>
            <p class="font-bold text-lg mb-1">{{ badge.name }}</p>
            <p class="text-sm text-gray-700 mb-2">{{ badge.description }}</p>
            <p class="text-xs text-gray-500">
              {% trans "Objetivo:" %} {{ badge.threshold }} {{ badge.unit_label }}
            </p>
            <p class="text-xs text-green-600 font-medium">
              {% trans "Progreso:" %} {{ badge.progress }} / {{ badge.threshold }} {{ badge.unit_label }}
            </p>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-gray-600">{% trans "Aún no has ganado ninguna insignia." %}</p>
    {% endif %}
  </div>

  <!-- Insignias disponibles -->
  <div class="mb-12">
    <h2 class="text-xl font-semibold mb-4">{% trans "Disponibles para ti" %}</h2>
    {% if available_badges %}
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">
        {% for badge in available_badges %}
          <div class="bg-white p-6 rounded-lg shadow hover:shadow-lg transition flex flex-col items-center">
            <div class="w-28 h-28 mb-4 rounded-full overflow-hidden border-4 border-gray-300 shadow-md flex items-center justify-center">
              {% if badge.name == "Starter" %}
                <img src="{% static 'img/badges/starter.png' %}" alt="{{ badge.name }}" class="max-w-full max-h-full opacity-80">
              {% elif badge.name == "Partner" %}
                <img src="{% static 'img/badges/Partner.png' %}" alt="{{ badge.name }}" class="max-w-full max-h-full opacity-80">
              {% elif badge.name == "Co2-Helper" %}
                <img src="{% static 'img/badges/CO2Helper.png' %}" alt="{{ badge.name }}" class="max-w-full max-h-full opacity-80">
              {% elif badge.name == "Eco-Veteran" %}
                <img src="{% static 'img/badges/EcoVeteran.png' %}" alt="{{ badge.name }}" class="max-w-full max-h-full opacity-80">
              {% endif %}
            </div>
            <p class="font-bold text-lg mb-1">{{ badge.name }}</p>
            <p class="text-sm text-gray-700 mb-2">{{ badge.description }}</p>
            <p class="text-xs text-gray-500">
              {% trans "Objetivo:" %} {{ badge.threshold }} {{ badge.unit_label }}
            </p>
            <p class="text-xs text-blue-600 font-medium">
              {% trans "Progreso:" %} {{ badge.progress }} / {{ badge.threshold }} {{ badge.unit_label }}
            </p>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-gray-600">{% trans "No hay insignias nuevas disponibles." %}</p>
    {% endif %}
  </div>

  <!-- Próximamente -->
  <div>
    <h2 class="text-xl font-semibold mb-4">{% trans "Próximamente" %}</h2>
    {% if coming_soon %}
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">
        {% for badge in coming_soon %}
          <div class="bg-gray-100 p-6 rounded-lg flex flex-col items-center">
            <div class="w-28 h-28 mb-4 rounded-full overflow-hidden border-4 border-gray-400 shadow-sm flex items-center justify-center">
              {% if badge.name == "Starter" %}
                <img src="{% static 'img/badges/starter.png' %}" alt="{{ badge.name }}" class="max-w-full max-h-full opacity-50">
              {% elif badge.name == "Partner" %}
                <img src="{% static 'img/badges/Partner.png' %}" alt="{{ badge.name }}" class="max-w-full max-h-full opacity-50">
              {% elif badge.name == "Co2-Helper" %}
                <img src="{% static 'img/badges/CO2Helper.png' %}" alt="{{ badge.name }}" class="max-w-full max-h-full opacity-50">
              {% elif badge.name == "Eco-Veteran" %}
                <img src="{% static 'img/badges/EcoVeteran.png' %}" alt="{{ badge.name }}" class="max-w-full max-h-full opacity-50">
              {% endif %}
            </div>
            <p class="font-bold text-lg text-gray-500 mb-1">{{ badge.name }}</p>
            <p class="text-sm text-gray-500 mb-2">{{ badge.description }}</p>
            <p class="text-xs text-gray-500">
              {% trans "Objetivo:" %} {{ badge.threshold }} {{ badge.unit_label }}
            </p>
            <p class="text-xs text-gray-500 font-medium">
              {% trans "Progreso:" %} {{ badge.progress }} / {{ badge.threshold }} {{ badge.unit_label }}
            </p>
            <p class="text-xs text-gray-400 mt-1">{% trans "Próximamente" %}</p>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-gray-600">{% trans "No hay insignias próximamente." %}</p>
    {% endif %}
  </div>
</section>
{% endblock %}
